-- Create and select the database
CREATE DATABASE LitCrit2;
USE LitCrit2;

-- Create 'User' table first because other tables reference it
CREATE TABLE User (
  userID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  username VARCHAR(30) NOT NULL,
  email VARCHAR(60),
  passwordHashed VARCHAR(100),
  favouriteGenre VARCHAR(100),
  profilePicture VARCHAR(1000),
  comments INT DEFAULT 0,
  role ENUM('administrator', 'admin', 'user') DEFAULT 'user'
);

-- Create 'genre' table
CREATE TABLE genre (
  genreID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  genreOrder INT,
  bookGenre VARCHAR(80)
);

-- Create 'Books' table
CREATE TABLE Books (
  bookID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  bookTitle VARCHAR(70) NOT NULL,
  bookAuthor VARCHAR(80) NOT NULL,
  yearOfPublishing INT NOT NULL,
  bookGenre INT,
  bookAnnotation VARCHAR(500),
  bookCover VARCHAR(1000),
  dateAdded DATETIME DEFAULT CURRENT_TIMESTAMP,
  userID INT NOT NULL,
  status ENUM('pending', 'approved', 'declined') DEFAULT 'pending',
  FOREIGN KEY (bookGenre) REFERENCES genre(genreID),
  FOREIGN KEY (userID) REFERENCES User(userID)
);
ALTER table Books add column rating_sum int default 0;
ALTER table Books add column rating_count int default 0;

-- Create 'Reviews' table
CREATE TABLE Reviews (
  reviewID INT NOT NULL PRIMARY KEY AUTO_INCREMENT,
  title VARCHAR(160),
  review TEXT,
  bookReviewID INT,
  dateAdded DATETIME DEFAULT current_timestamp(),
  userID INT NOT NULL,
  status ENUM('pending', 'approved', 'declined') DEFAULT 'pending',
  FOREIGN KEY (bookReviewID) REFERENCES Books(bookID),
  FOREIGN KEY (userID) REFERENCES User(userID)
);

ALTER table Reviews add column rating int default null;
ALTER TABLE Reviews ALTER COLUMN rating SET DEFAULT 0;


-- Insert genres
INSERT INTO genre (genreID, genreOrder, bookGenre) VALUES
  (1, 1, 'Поезия'),
  (2, 2, 'Проза'),
  (3, 3, 'Роман'),
  (4, 4, 'Детска Литература'),
  (5, 5, 'Романтика'),
  (6, 6, 'Комедия'),
  (7, 7, 'Криминалистика'),
  (8, 8, 'Фантастика');
  
select * from User;
select * from Books;
select * from Reviews;


INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Кървава песен', 'Пейо Яворов', 1907, 1, 'Поетичен сборник, изразяващ дълбоки чувства и страдания. Яворов е един от най-големите български поети. Този труд се счита за класика в българската литература.', '', 1, 'approved'),
('Стон', 'Димчо Дебелянов', 1907, 1, 'Стихотворения, изпълнени с тъга и лирика. Дебелянов разказва за трагедията на войната и любовта. Неговите творби са сред най-въздействащите в българската поезия.', '', 1, 'approved'),
('Вечната песен', 'Пейо Яворов', 1910, 1, 'Събира някои от най-важните стихове на Яворов. Изразява теми за любов и страдание. Оставя дълбока следа в българската литература.', '', 1, 'approved'),
('Лунни песни', 'Пейо Яворов', 1907, 1, 'Поетична колекция с нежни и меланхолични настроения. Вдъхновена от природата и човешките емоции. Изключително ценена от литературната критика.', '', 1, 'approved'),
('Балада за Георг Хених', 'Димчо Дебелянов', 1916, 1, 'Поетична балада, която изразява чувства на трагедия и съдба. Отразява военните събития в България. Притежава силна емоционална дълбочина.', '', 1, 'approved'),
('Избрани стихотворения', 'Елисавета Багряна', 1920, 1, 'Сборник, който показва модерната поезия на Багряна. Теми за свобода, любов и сила. Тя е един от водещите поети в българската литература.', '', 1, 'approved'),
('Балади и песни', 'Иван Вазов', 1882, 1, 'Колекция от патриотични и народни стихотворения. Вазов е наричан „патриарх на българската литература“. Творбите му са емблематични за националния дух.', '', 1, 'approved'),
('Поеми', 'Никола Вапцаров', 1940, 1, 'Силни социални и революционни послания в поезията на Вапцаров. Отразява борбата и страданията на работниците. Поетът остава символ на борбен дух.', '', 1, 'approved'),
('Градушка', 'Никола Вапцаров', 1941, 1, 'Известна поема, която описва природна стихия и човешка борба. Метафора за живота и трудностите. Част от значимото наследство на Вапцаров.', '', 1, 'approved'),
('Две души', 'Пейо Яворов', 1909, 1, 'Любовна поема, която разкрива дълбоките емоции на поета. Теми за раздяла и копнеж. Част от класическата българска поезия.', '', 1, 'approved'),
('Стихотворения', 'Христо Смирненски', 1919, 1, 'Колекция от социална и критична поезия. Смирненски разкрива тежкия живот на народа. Творбите му са част от литературното ни наследство.', '', 1, 'approved'),
('Септември', 'Христо Смирненски', 1923, 1, 'Антифашистки стихове, писани в трудни времена. Теми за борба и надежда. Смирненски остава актуален и днес.', '', 1, 'approved'),
('Две песни', 'Елисавета Багряна', 1921, 1, 'Стихотворения с женска сила и независимост. Багряна се отличава със своята индивидуалност. Притежава уникален поетичен стил.', '', 1, 'approved'),
('Песен за човека', 'Гео Милев', 1924, 1, 'Модернистичен поетичен труд, наситен с експресионизъм. Отразява трагедиите на времето. Милев е сред най-важните български поети.', '', 1, 'approved'),
('Стихотворения и поеми', 'Атанас Далчев', 1930, 1, 'Колекция, която съчетава философия и поезия. Далчев разглежда човешката съдба. Творбите му са дълбоки и вдъхновяващи.', '', 1, 'approved'),
('Песни за щурци', 'Христо Фотев', 1962, 1, 'Поетична книга с елементи на носталгия и меланхолия. Фотев е познат с лирическите си творби. Вдъхновява нови поколения.', '', 1, 'approved'),
('Черната песен', 'Пейо Яворов', 1907, 1, 'Трагична и дълбока поема за съдбата и любовта. Яворов изразява силни чувства. Част от българския поетичен канон.', '', 1, 'approved'),
('Песни на човека', 'Гео Милев', 1923, 1, 'Експресивна поетична творба с мощни послания. Милев е основен модернист в България. Отразява социални проблеми.', '', 1, 'approved'),
('Нощ', 'Димчо Дебелянов', 1913, 1, 'Лирично стихотворение, изпълнено с мистика и тъга. Отразява душевното състояние на поета. Част от най-обичаните български стихове.', '', 1, 'approved'),
('Песен за човека', 'Гео Милев', 1925, 1, 'Поема, насочена към хуманизма и човешката съдба. Отразява историческите събития. Милев остава един от най-влиятелните поети.', '', 1, 'approved');

INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Под игото', 'Иван Вазов', 1894, 2, 'Епичен роман, който описва българското робство под османска власт. Главен символ на българското национално съзнание. Вазов е патриарх на българската литература.', '', 1, 'approved'),
('Тютюн', 'Димитър Димов', 1951, 2, 'Роман, който разглежда живота на българските тютюнопроизводители. Покрива теми за любов и предателство. Един от значимите български социални романи.', '', 1, 'approved'),
('Железният светилник', 'Димитър Талев', 1952, 2, 'Сага за българската възрожденска епоха. Показва борбите и мечтите на народа. Книга с историческа и емоционална тежест.', '', 1, 'approved'),
('Балканският синдром', 'Димитър Попов', 2004, 2, 'Съвременен роман с политическа и социална насоченост. Изследва сложността на българското общество. Въздействащ и провокиращ размисъл.', '', 1, 'approved'),
('Време разделно', 'Антон Дончев', 1964, 2, 'Исторически роман за религиозните конфликти в България. Оживява важни събития от миналото. Книга с дълбока историческа стойност.', '', 1, 'approved'),
('Черната стрела', 'Валери Петров', 1984, 2, 'Приказка с исторически елементи и морални послания. Подходяща за млади и възрастни. Един от любимите български автори.', '', 1, 'approved'),
('Последният хипар', 'Валентин Петров', 1999, 2, 'Роман за българската младеж и културните промени. Изследва съвременната идентичност. Въздействаща история за търсене на смисъл.', '', 1, 'approved'),
('Нощем с белите коне', 'Васил Стоилов', 1987, 2, 'Сборник с разкази, които разкриват различни аспекти на човешкия живот. Теми за любов, загуба и търсене. Литературен принос към българската проза.', '', 1, 'approved'),
('Адвокатът на дявола', 'Валентин Петров', 1994, 2, 'Роман с криминален и психологически сюжет. Изследва доброто и злото. Вълнуващ и напрегнат разказ.', '', 1, 'approved'),
('Градът на мечтите', 'Иван Радоев', 1980, 2, 'Роман, който изобразява живота в социалистическа България. Сложни човешки отношения и социални проблеми. Отразява духа на времето.', '', 1, 'approved'),
('Война', 'Елисавета Багряна', 1975, 2, 'Сборник с кратки разкази и есеистични текстове. Теми за човешката съдба и войната. Един от значимите български писатели.', '', 1, 'approved'),
('Мостът', 'Димитър Димов', 1943, 2, 'Роман с психологически и социален контекст. Показва конфликти и човешки съдби. Класика в българската литература.', '', 1, 'approved'),
('Разкази', 'Йордан Йовков', 1926, 2, 'Колекция от разкази, изобразяващи живота на българския селянин. Лирични и човечни истории. Йовков е един от най-добрите български разказвачи.', '', 1, 'approved'),
('Неразказаната история', 'Александър Томов', 2001, 2, 'Съвременен роман, който разглежда политическите и социални промени. Сложна и напрегната интрига. Вдъхновява размисъл за миналото и бъдещето.', '', 1, 'approved'),
('Смъртта на дядо Горио', 'Иван Вазов', 1889, 2, 'Кратък роман с дълбоки социални послания. Описва живота на обикновения човек. Класика в българската литература.', '', 1, 'approved'),
('Черешова градина', 'Петко Славейков', 1876, 2, 'Романтична и патриотична творба. Изразява българския дух и традиции. Един от ранните класики.', '', 1, 'approved'),
('Пролетни разкази', 'Йордан Йовков', 1925, 2, 'Сборник с кратки разкази, пълни с човечност. Описва бита и нравите на българите. Вдъхновява със своя реализъм.', '', 1, 'approved'),
('Приказка за стълбата', 'Атанас Далчев', 1932, 2, 'Поетичен разказ, който разглежда човешката съдба. Сложни символи и метафори. Изключително творческо постижение.', '', 1, 'approved'),
('Избрани разкази', 'Елин Пелин', 1918, 2, 'Колекция от разкази, описващи българския селски живот. Елин Пелин е майстор на разказа. Творбите му са неизчерпаем източник на народната душевност.', '', 1, 'approved'),
('Лято', 'Николай Хайтов', 1978, 2, 'Роман, който разкрива живота в българското село. Силни социални и емоционални мотиви. Един от любимите български автори.', '', 1, 'approved');

INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Под игото', 'Иван Вазов', 1894, 3, 'Епичен роман за борбата на българите за свобода. Класика, обичана от поколения. Отразява духа на българския народ.', '', 1, 'approved'),
('Тютюн', 'Димитър Димов', 1951, 3, 'Дълбок социален роман за съдбата на тютюнопроизводителите. Показва човешките страсти и конфликти. Един от значимите български романи.', '', 1, 'approved'),
('Време разделно', 'Антон Дончев', 1964, 3, 'Исторически роман за религиозните конфликти. Въздействащ и обогатяващ знанието за миналото. Класика на българската литература.', '', 1, 'approved'),
('Железният светилник', 'Димитър Талев', 1952, 3, 'Сага за българската възрожденска епоха. Показва мечтите и борбите на народа. Книга с дълбок исторически смисъл.', '', 1, 'approved'),
('Тримата от запаса', 'Димитър Димов', 1964, 3, 'Роман с военни и социални мотиви. Показва живота на обикновените хора по време на война. Значима творба на българската литература.', '', 1, 'approved'),
('Един човек', 'Димитър Талев', 1960, 3, 'Роман, изследващ човешките взаимоотношения и съдби. Вдъхновява с дълбочина и емоция. Част от творчеството на Талев.', '', 1, 'approved'),
('Дърво без корен', 'Стефан Цанев', 1983, 3, 'Съвременен роман, който разглежда теми за идентичността. Авторът използва силни метафори и символи. Задълбочен и въздействащ текст.', '', 1, 'approved'),
('Градът на чудесата', 'Васил Захариев', 1988, 3, 'Роман с елементи на фантастика и реалност. Показва живота и мечтите на хората. Авторът създава уникален свят.', '', 1, 'approved'),
('Преход', 'Александър Томов', 1992, 3, 'Роман за социалните и политически промени в България. Изследва човешките конфликти и надежди. Важна книга за съвременната история.', '', 1, 'approved'),
('Третата възраст', 'Елена Алексиева', 2005, 3, 'Съвременен роман, разглеждащ живота и промените във възрастта. Авторката съчетава лирика и драма. Книга за смисъла на живота.', '', 1, 'approved'),
('Листопад', 'Васил Василев', 1998, 3, 'Роман с дълбоки емоции и социални теми. Описва любовта и загубата. Значима творба на българската литература.', '', 1, 'approved'),
('Светът е голям и спасение дебне отвсякъде', 'Иван Андрейчин', 2003, 3, 'Пътуващ роман за живота и приключенията. Показва силата на човешкия дух. Популярен съвременен автор.', '', 1, 'approved'),
('Пътуване към себе си', 'Мария Иванова', 2010, 3, 'Роман за личното израстване и търсене. Авторката описва трудностите и успехите. Вдъхновяващ и мотивиращ текст.', '', 1, 'approved'),
('Завръщане', 'Николай Григоров', 2007, 3, 'Роман за завръщането към корените и родината. Показва сложните човешки взаимоотношения. Дълбок и чувствителен разказ.', '', 1, 'approved'),
('Стъклен дом', 'Радослав Попов', 2009, 3, 'Роман с психологически и социални мотиви. Изследва теми за власт и манипулация. Вълнуваща и напрегната творба.', '', 1, 'approved'),
('Пеперуда', 'Елена Димитрова', 2012, 3, 'Роман за любовта и свободата. Авторката съчетава поезия и проза. Книга с лирично настроение.', '', 1, 'approved'),
('Последната нощ на света', 'Петър Петров', 2015, 3, 'Апокалиптичен роман за края на света. Показва човешката природа в крайни ситуации. Задълбочен и драматичен разказ.', '', 1, 'approved'),
('Чудото', 'Ирина Стоянова', 2018, 3, 'Роман за вярата и надеждата. Авторката представя магията на живота. Вдъхновяващ и оптимистичен текст.', '', 1, 'approved'),
('Сенки', 'Владимир Колев', 2011, 3, 'Трилър с мистериозен сюжет. Показва тъмните страни на човешката душа. Популярен жанр в българската литература.', '', 1, 'approved'),
('Нощен влак', 'Милена Иванова', 2013, 3, 'Роман с мистерия и любов. Авторката съчетава напрежение и емоция. Привлекателен за широката публика.', '', 1, 'approved'),
('Пясък в часовника', 'Стефан Петров', 2016, 3, 'Роман за времето и спомените. Описва живота през призмата на миналото. Лиричен и дълбок разказ.', '', 1, 'approved');

INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Към пропаст', 'Йордан Йовков', 1923, 4, 'Пиеса, която изследва човешката психика и морал. Показва драматични събития в живота на героите. Класика в българската драматургия.', '', 1, 'approved'),
('Греховната любов', 'Теодор Траянов', 1930, 4, 'Драма с силни емоционални конфликти. Разглежда теми за любов и предателство. Въздействащ текст.', '', 1, 'approved'),
('Драмата на човека', 'Димитър Димов', 1945, 4, 'Пиеса с философски и социални послания. Отразява тежките времена в България. Важен принос към драматургията.', '', 1, 'approved'),
('Майка', 'Стефан Цанев', 1978, 4, 'Пиеса за силата и жертвоготовността на майката. Емоционална и дълбока творба. Част от българския театрален репертоар.', '', 1, 'approved'),
('Балконът', 'Йордан Радичков', 1982, 4, 'Драма с елементи на сатира и абсурд. Показва социалните проблеми по забавен начин. Популярна пиеса.', '', 1, 'approved'),
('Сватбата', 'Рачо Стоянов', 1903, 4, 'Пиеса, която изобразява българския бит и обичаи. Теми за семейство и традиции. Класика в българската литература.', '', 1, 'approved'),
('Грешката', 'Васил Ванчев', 1965, 4, 'Психологическа драма с морални дилеми. Изследва човешката природа и избори. Въздействаща пиеса.', '', 1, 'approved'),
('Пътят към успеха', 'Александър Морфов', 1999, 4, 'Съвременна драма за живота и амбициите. Показва трудностите пред постигането на мечти. Актуална и мотивираща.', '', 1, 'approved'),
('Зимна приказка', 'Петко Кирчев', 2000, 4, 'Поетична драма с елементи на мистерия. Теми за любов и съдба. Въздействащ и красив текст.', '', 1, 'approved'),
('Градът', 'Борис Христов', 1985, 4, 'Пиеса, която показва живота в големия град. Социални и човешки конфликти. Силно драматургично произведение.', '', 1, 'approved'),
('Отчаяни надежди', 'Иван Стоянов', 1995, 4, 'Драма за живота на обикновените хора. Теми за борба и оцеляване. Въздействащ и реалистичен разказ.', '', 1, 'approved'),
('Нощта преди битката', 'Никола Колев', 1980, 4, 'Психологическа драма, разказваща за предстоящ конфликт. Изследва човешката психика и страхове. Важна пиеса в българския театър.', '', 1, 'approved'),
('Стъклената топка', 'Елена Петрова', 1990, 4, 'Драма с елементи на фентъзи и мистерия. Показва човешките мечти и илюзии. Вълнуващ текст.', '', 1, 'approved'),
('Любов и война', 'Румен Николов', 1998, 4, 'Пиеса, която изследва любовта в трудни времена. Теми за загуба и оцеляване. Силно драматургично произведение.', '', 1, 'approved'),
('Песен за живота', 'Весела Радева', 2005, 4, 'Драма за борбата и надеждата. Показва силата на човешкия дух. Вдъхновяващ текст.', '', 1, 'approved'),
('Тишина', 'Симеон Димитров', 2010, 4, 'Психологическа драма, разглеждаща вътрешните конфликти. Теми за мълчанието и разбирателството. Съвременна и актуална пиеса.', '', 1, 'approved'),
('В капан', 'Мария Иванова', 2012, 4, 'Драма за живота в затвора и човешките съдби. Показва надеждата и отчаянието. Силно въздействащ текст.', '', 1, 'approved'),
('Призракът', 'Петър Петров', 2013, 4, 'Пиеса с елементи на мистерия и ужас. Изследва страховете и човешката психика. Популярна сред младите.', '', 1, 'approved'),
('Обратен път', 'Георги Стоянов', 2016, 4, 'Драма за личните избори и съдби. Показва сложността на човешките отношения. Вдъхновяващ и реалистичен текст.', '', 1, 'approved'),
('Пътят на вятъра', 'Валентина Тодорова', 2018, 4, 'Пиеса за живота и промените. Теми за свобода и съдба. Съвременна и дълбока творба.', '', 1, 'approved'),
('Надежда', 'Ирина Георгиева', 2019, 4, 'Драма за вярата и борбата в живота. Показва силата на човешкия дух. Вдъхновяващ и мотивиращ текст.', '', 1, 'approved'),
('Последна среща', 'Михаил Димитров', 2020, 4, 'Пиеса за любовта и раздялата. Теми за прошка и надежда. Силно емоционално произведение.', '', 1, 'approved');

INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Непознатият свят', 'Александър Петров', 1985, 5, 'Роман за пътуване в други измерения. Изследва човешката природа и технологии. Важна книга в българската фантастика.', '', 1, 'approved'),
('Врата към звездите', 'Васил Василев', 1990, 5, 'История за космически приключения и открития. Показва човешкия стремеж към непознатото. Популярен роман сред любителите на жанра.', '', 1, 'approved'),
('Светлини в мрака', 'Иван Иванов', 1995, 5, 'Фантастичен роман с теми за светлината и тъмнината. Разказва за борбата между доброто и злото.', '', 1, 'approved'),
('Космически пътешественик', 'Георги Георгиев', 2000, 5, 'Приключенски роман в космоса. Показва предизвикателствата пред човечеството. Вълнуващо четиво за млади и възрастни.', '', 1, 'approved'),
('Машина на времето', 'Димитър Димитров', 2005, 5, 'Роман за пътуване във времето и последиците от това. Разглежда морални и етични въпроси.', '', 1, 'approved'),
('Изгубената планета', 'Радослав Радев', 2010, 5, 'История за забравена планета и нейното откриване. Показва загадките на вселената.', '', 1, 'approved'),
('Кибер свят', 'Петър Петров', 2012, 5, 'Роман за дигиталната епоха и технологиите. Изследва влиянието на киберпространството.', '', 1, 'approved'),
('Галактика X', 'Илия Илиев', 2015, 5, 'Приключенски научнофантастичен роман. Показва битките за контрол над галактиката.', '', 1, 'approved'),
('Последният кораб', 'Милена Милева', 2017, 5, 'Роман за оцеляване в космоса. Теми за изолация и надежда.', '', 1, 'approved'),
('Звездни войни: Българският фронт', 'Тодор Тодоров', 2019, 5, 'Фантастична история, вдъхновена от класиката. Показва борбата между доброто и злото на космическа сцена.', '', 1, 'approved'),
('Тайните на времето', 'Иванка Иванова', 2021, 5, 'Роман за тайните и мистериите на времето. Смесва наука и фантазия.', '', 1, 'approved'),
('Междузвездни войни', 'Георги Григоров', 2022, 5, 'Приключенски роман с космически битки и героични постъпки.', '', 1, 'approved'),
('Завръщане на земята', 'Мария Маринова', 2023, 5, 'История за завръщането на човечеството на родната планета.', '', 1, 'approved'),
('Виртуална реалност', 'Светослав Светославов', 2024, 5, 'Роман за дигиталния свят и влиянието му върху човека.', '', 1, 'approved'),
('Код на бъдещето', 'Александър Александров', 2024, 5, 'Роман за изкуствения интелект и бъдещето на човечеството.', '', 1, 'approved'),
('Паралелен свят', 'Виктор Викторов', 2025, 5, 'Роман за алтернативни реалности и възможности.', '', 1, 'approved'),
('Галактическа мисия', 'Даниел Димитров', 2025, 5, 'Приключение в далечни галактики и борба за оцеляване.', '', 1, 'approved'),
('Изгубени в космоса', 'Елена Еленова', 2025, 5, 'История за оцеляване и приятелство в открития космос.', '', 1, 'approved'),
('Машина на съдбата', 'Красимир Красимиров', 2025, 5, 'Фантастичен роман за времето и съдбата на човечеството.', '', 1, 'approved'),
('Тайните на вселената', 'Иван Иванов', 2025, 5, 'Роман за мистериите и тайните на вселената.', '', 1, 'approved');


INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Стихове от Родината', 'Димитър Димитров', 1901, 6, 'Сборник с патриотична поезия. Изразява любов към България и природата.', '', 1, 'approved'),
('Любовни песни', 'Рада Русева', 1910, 6, 'Поетични творби за любовта и човешките чувства. Лирика с дълбок емоционален заряд.', '', 1, 'approved'),
('Песни за живота', 'Иван Иванов', 1920, 6, 'Сборник с поезия за живота и ежедневието. Отразява радостите и трудностите.', '', 1, 'approved'),
('Нощни мисли', 'Мария Маринова', 1930, 6, 'Поезия с философски размисли и лични емоции.', '', 1, 'approved'),
('Сън и реалност', 'Петър Петров', 1940, 6, 'Поетичен сборник с теми за съня и живота.', '', 1, 'approved'),
('Вятър и море', 'Елена Еленова', 1950, 6, 'Стихове за природата и човека. Лирични и емоционални.', '', 1, 'approved'),
('Гласът на тишината', 'Александър Александров', 1960, 6, 'Поезия с философски и екзистенциални теми.', '', 1, 'approved'),
('Дневник на душата', 'Васил Василев', 1970, 6, 'Лични и емоционални стихове. Размисли за живота и смъртта.', '', 1, 'approved'),
('Песен за любовта', 'Румена Руменова', 1980, 6, 'Любовна поезия с изразителен стил.', '', 1, 'approved'),
('Светлина в мрака', 'Стоян Стоянов', 1990, 6, 'Поезия за светлината и тъмнината в живота.', '', 1, 'approved'),
('Морски песни', 'Надежда Неделчева', 2000, 6, 'Поетичен сборник с морски теми и образи.', '', 1, 'approved'),
('Пътища на времето', 'Илия Илиев', 2010, 6, 'Стихове за живота и времето.', '', 1, 'approved'),
('Тишина и звуци', 'Ирина Иванова', 2015, 6, 'Поезия с лиричен и философски характер.', '', 1, 'approved'),
('Полет към свободата', 'Милена Милева', 2020, 6, 'Поетичен сборник с теми за свобода и мечти.', '', 1, 'approved'),
('Ветрове на промяната', 'Красимир Красимиров', 2022, 6, 'Стихове за промените в живота и света.', '', 1, 'approved'),
('Звездна нощ', 'Даниела Димитрова', 2023, 6, 'Лирична поезия с образи от природата и космоса.', '', 1, 'approved'),
('Песен за мира', 'Василка Василева', 2024, 6, 'Поезия за мира и хармонията.', '', 1, 'approved'),
('Сърце и душа', 'Йордан Йорданов', 2024, 6, 'Поетични творби за човешките чувства и съдби.', '', 1, 'approved'),
('Магията на думите', 'Елена Еленова', 2025, 6, 'Стихове, които изразяват магията и силата на думите.', '', 1, 'approved'),
('Танц на светлината', 'Иван Иванов', 2025, 6, 'Поезия с образи на светлина и движение.', '', 1, 'approved');


INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Българските владетели', 'Петър Петров', 1900, 7, 'Историческа книга за българските владетели и царе.', '', 1, 'approved'),
('История на България', 'Иван Иванов', 1910, 7, 'Подробен исторически обзор на България.', '', 1, 'approved'),
('Войните на България', 'Георги Георгиев', 1920, 7, 'Книга за военната история на България.', '', 1, 'approved'),
('Пътят към свободата', 'Мария Маринова', 1930, 7, 'История за борбата на българите за независимост.', '', 1, 'approved'),
('Средновековна България', 'Александър Александров', 1940, 7, 'Книга за средновековната история и култура на България.', '', 1, 'approved'),
('История на Третата българска държава', 'Иванка Иванова', 1950, 7, 'Исторически анализ на съвременна България.', '', 1, 'approved'),
('Борци за свободата', 'Васил Василев', 1960, 7, 'Книга за националноосвободителните борби.', '', 1, 'approved'),
('Културно наследство', 'Радослав Радев', 1970, 7, 'Изследване на българското културно наследство.', '', 1, 'approved'),
('Истории от миналото', 'Петър Петров', 1980, 7, 'Сборник с разкази за исторически събития.', '', 1, 'approved'),
('Героични битки', 'Йордан Йорданов', 1990, 7, 'Книга за важни битки в българската история.', '', 1, 'approved'),
('Пътешествия в историята', 'Ирина Иванова', 2000, 7, 'Исторически пътеписи и анализи.', '', 1, 'approved'),
('Векове на промяна', 'Стефан Стоянов', 2010, 7, 'История на България през XX век.', '', 1, 'approved'),
('Съдбата на нацията', 'Мария Маринова', 2015, 7, 'Анализ на историческите фактори, формирали България.', '', 1, 'approved'),
('Паметници и символи', 'Даниел Димитров', 2020, 7, 'Книга за българските паметници и национални символи.', '', 1, 'approved'),
('Родината в сърцето', 'Валентина Тодорова', 2022, 7, 'История за патриотизма и любовта към родината.', '', 1, 'approved'),
('Тайните на миналото', 'Красимир Красимиров', 2023, 7, 'Разкриване на неизвестни факти от българската история.', '', 1, 'approved'),
('Паметта на народа', 'Иван Иванов', 2024, 7, 'Историческа книга за паметта и традициите на българския народ.', '', 1, 'approved'),
('България и света', 'Радослав Радев', 2024, 7, 'Исторически анализ на ролята на България в световната история.', '', 1, 'approved'),
('Гласове от миналото', 'Елена Еленова', 2025, 7, 'Сборник с исторически разкази и спомени.', '', 1, 'approved'),
('Светлина от миналото', 'Йордан Йорданов', 2025, 7, 'Книга за историческите уроци и наследство.', '', 1, 'approved');

INSERT INTO Books (bookTitle, bookAuthor, yearOfPublishing, bookGenre, bookAnnotation, bookCover, userID, status) VALUES
('Под игото', 'Иван Вазов', 1894, 8, 'Класически роман, описващ живота на българския народ по време на Османското владичество.', '', 1, 'approved'),
('Балкански синдром', 'Алеко Константинов', 1895, 8, 'Сборник с пътеписи и разкази, които иронично описват българското общество.', '', 1, 'approved'),
('Тютюн', 'Димитър Димов', 1951, 8, 'Роман за борбата на човека с вътрешните и външните му демони в труден исторически период.', '', 1, 'approved'),
('Бай Ганьо', 'Алеко Константинов', 1895, 8, 'Сатиричен сборник от разкази, представящ типичния българин от края на 19-ти век.', '', 1, 'approved'),
('Под манастирската лоза', 'Стоян Михайловски', 1901, 8, 'Класически разкази с дълбок морален и социален подтекст.', '', 1, 'approved'),
('В полите на Витоша', 'Йордан Йовков', 1920, 8, 'Сборник с разкази, които изобразяват живота на българските селяни и техните съдби.', '', 1, 'approved'),
('Последна радост', 'Иван Вазов', 1911, 8, 'Роман за любовта и съдбата на българина в променящия се свят.', '', 1, 'approved'),
('Хайдути', 'Любен Каравелов', 1875, 8, 'Исторически роман, разказващ за българските хайдути и борбата им за свобода.', '', 1, 'approved'),
('Железният светилник', 'Димитър Талев', 1952, 8, 'Исторически роман, представящ борбите на българския народ през 19-ти век.', '', 1, 'approved'),
('Череши', 'Васил Попов', 1935, 8, 'Разкази, показващи социални и морални проблеми в българското общество.', '', 1, 'approved'),
('Старопланински легенди', 'Иван Вазов', 1894, 8, 'Сборник с легенди и разкази, базирани на българския фолклор и история.', '', 1, 'approved'),
('Крадецът на праскови', 'Петър Динеков', 1940, 8, 'Роман, описващ човешките слабости и борбата с тях.', '', 1, 'approved'),
('Вятърът на север', 'Йордан Радичков', 1968, 8, 'Разкази с характерен български колорит и философска дълбочина.', '', 1, 'approved'),
('Разни хора, разни идеали', 'Алеко Константинов', 1894, 8, 'Книга с есета и разкази, разглеждащи социални теми и морални дилеми.', '', 1, 'approved'),
('Подир сенките на времето', 'Пенчо Славейков', 1904, 8, 'Лирична проза с философски размисли за живота и смъртта.', '', 1, 'approved'),
('На оня свят', 'Йордан Йовков', 1933, 8, 'Разкази с дълбоки морални послания и изобразяващи българския бит.', '', 1, 'approved'),
('Обич', 'Елин Пелин', 1910, 8, 'Разкази за любовта, живота и човешките отношения в българското село.', '', 1, 'approved'),
('Дервишово семе', 'Елисавета Багряна', 1931, 8, 'Сборник с лирична и философска поезия и проза.', '', 1, 'approved'),
('Желязната маска', 'Иван Вазов', 1890, 8, 'Исторически роман, разглеждащ събития от българската история.', '', 1, 'approved'),
('Богомилски легенди', 'Димитър Талев', 1943, 8, 'Разкази и легенди, вдъхновени от българската история и фолклор.', '', 1, 'approved');

update Books
set bookCover = 'litCrit-cover.jpg';

INSERT INTO Reviews (title, review, bookReviewID, userID, status) VALUES
-- Approved
('Кървава песен', 'Много силна и въздействаща поезия. Препоръчвам на всеки.', 1, 1, 'approved'),
('Стон', 'Трогателна колекция от стихотворения, носещи лиричен дух.', 2, 1, 'approved'),
('Вечната песен', 'Яворов отново доказва своето величие. Прекрасна книга.', 3, 1, 'approved'),
('Лунни песни', 'Нежна и красива поезия, изпълнена с емоции.', 4, 1, 'approved'),
('Под игото', 'Задължително четиво за всеки българин.', 21, 1, 'approved'),
('Тютюн', 'Изключително дълбок роман, който разкрива човешките драми.', 22, 1, 'approved'),
('Железният светилник', 'Историческа драма с вълнуващи персонажи.', 23, 1, 'approved'),
('Балканският синдром', 'Съвременна и провокираща творба.', 24, 1, 'approved'),
('Време разделно', 'Много силна историческа перспектива.', 25, 1, 'approved'),
('Черната стрела', 'Интересна и морална история, подходяща за подрастващи.', 26, 1, 'approved'),

-- Pending
('Последният хипар', 'Добре написан роман за изгубеното поколение.', 27, 1, 'pending'),
('Нощем с белите коне', 'Много човешки и дълбоки разкази.', 28, 1, 'pending'),
('Адвокатът на дявола', 'Интригуващ сюжет и добра динамика.', 29, 1, 'pending'),
('Градът на мечтите', 'Поглед върху социализма през лична призма.', 30, 1, 'pending'),
('Война', 'Трогателни текстове с голяма сила.', 31, 1, 'pending'),
('Мостът', 'Прекрасна социална драма.', 32, 1, 'pending'),
('Разкази', 'Йовков е майстор на детайла и човечността.', 33, 1, 'pending'),
('Неразказаната история', 'Много напрегнат сюжет и добър стил.', 34, 1, 'pending'),
('Смъртта на дядо Горио', 'Силен социален контекст, който напомня за Вазовата мъдрост.', 35, 1, 'pending'),
('Черешова градина', 'Носталгична и романтична творба.', 36, 1, 'pending'),

-- Declined
('Пролетни разкази', 'Не успя да ме грабне, твърде бавен ритъм.', 37, 1, 'declined'),
('Приказка за стълбата', 'Твърде символична за моя вкус.', 38, 1, 'declined'),
('Избрани разкази', 'Не ме впечатли, очаквах повече.', 39, 1, 'declined'),
('Лято', 'Прекалено описателна и монотонна.', 40, 1, 'declined'),
('Поеми', 'Тежка и тъмна поезия, не за всеки.', 8, 1, 'declined'),
('Градушка', 'Прекалено метафорична, трудна за разбиране.', 9, 1, 'declined'),
('Две души', 'Неубедителна любовна история.', 10, 1, 'declined'),
('Стихотворения', 'Смирненски тук не е в най-добрата си форма.', 11, 1, 'declined'),
('Септември', 'Неуспешен опит за политическа поезия.', 12, 1, 'declined'),
('Две песни', 'Твърде кратко и не особено въздействащо.', 13, 1, 'declined');

DELIMITER $$
CREATE TRIGGER review_approve_update
AFTER UPDATE ON Reviews
FOR EACH ROW
BEGIN
    IF OLD.status != 'approved' AND NEW.status = 'approved' AND NEW.rating IS NOT NULL THEN
        UPDATE Books
        SET rating_sum = rating_sum + NEW.rating,
            rating_count = rating_count + 1
        WHERE bookID = NEW.bookReviewID;
    END IF;
END $$
DELIMITER ;



show triggers;
DROP TRIGGER IF EXISTS review_approve_update;
